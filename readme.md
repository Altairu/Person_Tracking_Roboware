# Robowarepkg

## 概要
`Robowarepkg`は、ロボットの移動を制御するためのROS2パッケージです。このパッケージは、WebSocket経由でコントローラーから指示を受け取り、それらをもとに２輪の運動学をもとに左右のタイヤ速度を計算し、マイコンに送信する。また、それぞれのタイヤのRPSをマイコンから受取、自己位置を推定する。

## システム構成
### ノード構成
- `web_socket_node`：WebSocket通信を介してコントローラーから指示（V、ω）を受け取り、ROS2トピックにパブリッシュします。
- `Robowarenode`：WebSocketノードからの指示を受け取り、二輪の運動学に基づき左右両方の車輪速度（RPS）を求める、シリアル通信ノードに送信します。速度は台形プロファイルに基づいてスムーズに増加します。
- `serial_send_node`：`Robowarenode`からの移動指示を受け取り、シリアル通信を介してマイコンに送信します。
- `serial_read_node`：マイコンからそれぞれのタイヤのRPSを受信し、ROS2トピックにパブリッシュします。
- `position_node`：マイコンから受け取ったデータをもとに自己位置データを取得し、推定位置をパブリッシュします。

## マイコンとの通信
### 送信データ形式 (PCからマイコンへ)
- 0xA5
- 0xA5
- Vr(mm/s) : float (4バイト)
- Vl(mm/s) : float (4バイト)

合計で 17 バイトのデータが送信されます。

### 受信データ形式 (マイコンからPCへ)
- 0xA5
- 0xA5
- ωr(RPS) : float (4バイト)
- ωl(RPS) : float (4バイト)
